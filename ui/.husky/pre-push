cd ui #Navigate to the ui directory

echo "ğŸš€ Running pre-push checks..."

# # Run the full test suite
# echo "ğŸ§ª Running full test suite..."
# npm run test
# if [ $? -ne 0 ]; then
#   echo "âŒ Tests failed. Please fix them before pushing."
#   exit 1
# fi

# Check for unused dependencies
echo "ğŸ“¦ Running depcheck..."
npx depcheck
if [ $? -ne 0 ]; then
  echo "âš ï¸ Unused dependencies found. Please review and clean up your dependencies."
  exit 1
fi

# Run Snyk security scan
echo "ğŸ”’ Running Snyk security scan..."
npx snyk test
if [ $? -ne 0 ]; then
  echo "âš ï¸ Snyk found security vulnerabilities. Please review and fix them before pushing."
  exit 1
fi

# Run security audit
echo "ğŸ”’ Running npm security audit..."
npm audit
if [ $? -ne 0 ]; then
  echo "âš ï¸ Security vulnerabilities found. Please review and fix them before pushing."
  exit 1
fi

# Run build to ensure everything compiles correctly
echo "ğŸ—ï¸ Running build..."
npm run build
if [ $? -ne 0 ]; then
  echo "âŒ Build failed. Please fix the issues before pushing."
  exit 1
fi

echo "âœ… All pre-push checks passed!"
